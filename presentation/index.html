<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>REST APIs en Express.js</title>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css" id="theme">
    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/gruvbox-dark.css">
    <link rel="stylesheet" href="css/style.css">


    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h1>REST API en Express</h1>
            </section>
            <section>
                <section>
									<div class="sl-block" data-block-type="text">
										<div class="sl-block-content" data-placeholder-tag="h1" data-placeholder-text="Title Text" style="z-index: 12;">
												<h2 style="color:rgb(34, 34, 34); font-size:1.4em; font-weight: 300; font-family: 'Helvetica Neue','Open Sans',sans-serif;">
														<strong>RE</strong>presentational
														<strong>S</strong>tate
														<strong>T</strong>ransfer
												</h2>
										</div>
									</div>
                    <br />
                    <ul>
                      <li>
                        Client-Server
                      </li>
                      <li>
                        Uniform Interface
                      </li>
                      <li>
                        Stateless
                      </li>
                      <li>
                        Cacheable
                      </li>
                      <li>
                        Layered System
                      </li>
                    </ul>
                </section>
            </section>
            <section>
                <section>
                    <h2>Un peque√±a api</h2>
                    <div>
                        <img width="100%" height="100%" src="00.gif" />
                    </div>
                </section>
								<section>
                    <h2>package.json</h2>
                    <pre><code id="packagejson" class="hljs" contenteditable>
{
  "name": "myapp",
  "version": "1.0.0",
  "description": "",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "dependencies": {
    "body-parser": "^1.15.2",
    "express": "^4.14.0"
  }
}
                    </code></pre>
                </section>
								<section>
			              <h2>app.js</h2>
			              <video id="video" data-autoplay class="stretch" src="video.mp4"></video>
			              <aside class="notes">
			                  Bodyparser: application/x-www-form-urlencoded Multer: multipart/form-data
			              </aside>
			          </section>

                <section>
                    <h2>app.js</h2>
                    <pre class="javascript"><code class="hljs" data-trim contenteditable>
const express = require('express');
const app = express();
const bodyParser = require('body-parser');
const multer = require('multer');
const upload = multer();

app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true });

app.use((req, res, next) => {
  res.status(404);
  res.send({ error: "üòÖ Can't find that" });
});

app.listen(3000, () => { console.log('üëÇüèΩ on port 3000!'); });
                    </code></pre>
                </section>
                <section>
                    <h2>app.js</h2>
                    <pre><code class="hljs" data-trim contenteditable>
let users = [ { username: 'nicole', name: 'Nicole' }, ...]
let pets = [ { name: 'oblina', emoji: 'üê∂', user: 'nicole' }, ...]
                    </code></pre>
                    <pre><code class="hljs" data-trim contenteditable>
app.get('/', (req, res, next) => { ... });

app.get('/users', (req, res, next) => {
  res.format({ json: () => { res.json(users); } });
});

app.get('/users/:username', (req, res, next) => {
  const username = req.params.username;
  const user = users.find(item => item.username === username );

  if (!user) next();
  res.format({ json: () => { res.json(user); } });
});
                    </code></pre>
              </section>
            </section>
						<section>
							<h2>El objeto <strong>req</strong></h2>
							<ul>
								<li>params
									<pre><code class="hljs" contenteditable>
app.get('/users/:username', (req, res) => {

const username = req.params.username;
...
});
									</code></pre>
								</li>
								<li>body
									<pre><code class="hljs" contenteditable>
app.post('/users', upload.array(), (req, res) => {

const username = req.body.username;
...
});
									</code></pre>
								</li>
							</ul>
						</section>
						<section>
							<h2>El objeto <strong>res</strong></h2>
							<ul>
								<li>send
									<pre><code class="hljs" contenteditable>
app.get('/', (req, res, next) => {
  res.send("Hello world");
});
									</code></pre>
								</li>
								<li>format
									<pre><code class="hljs" contenteditable>
app.get('/', (req, res, next) => {
  res.format({
    html: () => { ... }
    json: () => { res.json({}); }
  });
});
									</code></pre>
								</li>
							</ul>
						</section>
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            keyboard: true,
            history: true,

            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [{
                src: 'plugin/markdown/marked.js'
            }, {
                src: 'plugin/markdown/markdown.js'
            }, {
                src: 'plugin/notes/notes.js',
                async: true
            }, {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function() {
                    hljs.initHighlightingOnLoad();
                }
            }]
        });
        Reveal.configure({
            keyboard: {
                13: 'next', // go to the next slide when the ENTER key is pressed
                27: function() {}, // do something custom when ESC is pressed
                32: function vidplay() {
                    var video = document.getElementById("video");
                    if (video.paused == true) video.play();
                    else video.pause();
                }
            }
        });
    </script>
</body>

</html>
